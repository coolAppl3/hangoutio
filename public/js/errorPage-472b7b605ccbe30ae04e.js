(()=>{"use strict";class e{static display(e){const t=document.querySelector("#confirm-modal");t&&t.remove();const n=this.createConfirmModal(e);return document.body.appendChild(n),n.focus(),requestAnimationFrame((()=>{requestAnimationFrame((()=>{n.classList.add("revealed")}))})),n}static remove(){const e=document.querySelector("#confirm-modal");null==e||e.classList.remove("revealed"),setTimeout((()=>null==e?void 0:e.remove()),150)}static createConfirmModal(e){const t=document.createElement("div");t.id="confirm-modal",t.setAttribute("tabindex","0"),e.description&&(t.className="has-description");const n=document.createElement("div");if(n.id="confirm-modal-container",n.appendChild(this.createModalTitle(e.title)),e.description){const t=this.createDescriptionContainer();for(const n of e.description.split("\n"))t.appendChild(this.createModalDescription(n));n.appendChild(t)}return n.appendChild(this.createBtnContainer(e)),t.appendChild(n),t}static createModalTitle(e){const t=document.createElement("p");return t.className="confirm-modal-title",t.appendChild(document.createTextNode(e)),t}static createDescriptionContainer(){const e=document.createElement("div");return e.className="description-container",e}static createModalDescription(e){const t=document.createElement("p");return t.className="confirm-modal-description",t.appendChild(document.createTextNode(e)),t}static createBtnContainer(e){const t=document.createElement("div");return t.className="btn-container",t.appendChild(this.createBtnElement("confirm-btn",e.confirmBtnTitle,e.isDangerousAction)),t.appendChild(this.createBtnElement("cancel-btn",e.cancelBtnTitle)),e.extraBtnTitle&&t.appendChild(this.createBtnElement("other-btn",e.extraBtnTitle)),t}static createBtnElement(e,t,n){const o=document.createElement("button");return o.id=`confirm-modal-${e}`,o.setAttribute("type","button"),o.appendChild(document.createTextNode(t)),n&&(o.className="danger"),o}}class t{static get(e){const t=this.createCookieMap().get(e);return t||null}static set(e,t,n){document.cookie=n?`${e}=${t}; max-age=${n}; path=/; Secure`:`${e}=${t}; path=/; Secure`}static remove(e){document.cookie=`${e}=; max-age=0`}static createCookieMap(){const e=document.cookie,t=new Map;if(""===e)return t;const n=e.split("; ");for(const e of n){const n=e.split("=")[0],o=e.split("=")[1];t.set(n,o)}return t}}class n{static display(){if(document.querySelector("#loading-modal"))return;const e=this.createModal();document.body.appendChild(e)}static remove(){const e=document.querySelector("#loading-modal");null==e||e.remove()}static createModal(){const e=document.createElement("div");return e.id="loading-modal",e.appendChild(this.createModalSpinner()),e}static createModalSpinner(){const e=document.createElement("div");return e.className="spinner",e}}function o(e,t,n=2e3){(""===e.trim()||n&&n<=0)&&(n=2e3);const o=document.querySelector("#popup");o&&o.remove();const i=function(e){const t=document.createElement("div");return t.id="popup",t.className=e,t}(t);i.appendChild(function(e){const t=document.createElement("span");return t.appendChild(document.createTextNode(e)),t}(e)),document.body.appendChild(i),requestAnimationFrame((()=>{requestAnimationFrame((()=>{i.classList.add("in-view")}))})),setTimeout((()=>{i.classList.remove("in-view"),setTimeout((()=>i.remove()),150)}),n||2e3)}function i(){t.remove("authToken"),t.remove("guestHangoutId"),document.dispatchEvent(new CustomEvent("signedOut"))}function a(e){if(e.length<34)return!1;if(!e.startsWith("a")&&!e.startsWith("g"))return!1;if("_"!==e[32])return!1;if(!Number.isInteger(+e.substring(33)))return!1;return/^[A-Za-z0-9_]{34,}$/.test(e)}const c=document.querySelector(".bot-nav"),s=document.querySelector("#account-list-btn"),r=document.querySelector("#account-list-container");function l(t){t.target instanceof HTMLEmbedElement&&t.target.classList.contains("sign-out-btn")&&(t.preventDefault(),e.display({title:"Are you sure you want to sign out of your account?",description:null,confirmBtnTitle:"Confirm",cancelBtnTitle:"Cancel",extraBtnTitle:null,isDangerousAction:!0}).addEventListener("click",(t=>{if(t.target instanceof HTMLElement)return"confirm-modal-confirm-btn"===t.target.id?(n.display(),i(),o("Signed out successfully.","success"),void setTimeout((()=>window.location.reload()),1e3)):void("confirm-modal-cancel-btn"===t.target.id&&e.remove())})))}function d(){const e=t.get("authToken");if(e)return a(e)?void(e.startsWith("g")?null==c||c.classList.add("guest-user"):null==c||c.classList.add("account-user")):(null==c||c.classList.remove("guest-user","account-user"),void t.remove("authToken"));null==c||c.classList.remove("guest-user","account-user")}function u(){if(null==s?void 0:s.classList.contains("expanded"))return setTimeout((()=>null==s?void 0:s.classList.remove("expanded")),150),void requestAnimationFrame((()=>{requestAnimationFrame((()=>{r&&(r.style.opacity="0")}))}));null==s||s.classList.add("expanded"),requestAnimationFrame((()=>{requestAnimationFrame((()=>{r&&(r.style.opacity="1")}))}))}function m(){!function(){setTimeout((()=>{var e;null===(e=document.querySelector("#transition-pause"))||void 0===e||e.remove()}),100);const e=localStorage.getItem("darkTheme");if(!e||!JSON.parse(e))return document.documentElement.classList.remove("dark"),localStorage.setItem("darkTheme",JSON.stringify(!1)),void f("light");document.documentElement.classList.add("dark"),f("dark")}();const e=document.querySelector("#theme-switcher");null==e||e.addEventListener("click",v),null==e||e.addEventListener("keyup",p)}function p(e){"Enter"===e.key&&v()}function v(){const e=localStorage.getItem("darkTheme");if(!(e?JSON.parse(e):null))return document.documentElement.classList.add("dark"),localStorage.setItem("darkTheme",JSON.stringify(!0)),void f("dark");document.documentElement.classList.remove("dark"),localStorage.setItem("darkTheme",JSON.stringify(!1)),f("light")}function f(e){const t=document.querySelector("#theme-switcher");"dark"!==e?null==t||t.classList.remove("dark-theme"):null==t||t.classList.add("dark-theme")}const g=document.querySelector(".top-nav"),h=document.querySelector("#account-nav-container-btn");function y(t){t.target instanceof HTMLElement&&t.target.classList.contains("sign-out-btn")&&(t.preventDefault(),e.display({title:"Are you sure you want to sign out of your account?",description:null,confirmBtnTitle:"Confirm",cancelBtnTitle:"Cancel",extraBtnTitle:null,isDangerousAction:!0}).addEventListener("click",(t=>{if(t.target instanceof HTMLElement)return"confirm-modal-confirm-btn"===t.target.id?(n.display(),i(),o("Signed out successfully.","success"),void setTimeout((()=>window.location.reload()),1e3)):void("confirm-modal-cancel-btn"===t.target.id&&e.remove())})))}function L(){const e=document.querySelector("#account-nav-container-links");if(null==e?void 0:e.classList.contains("expanded"))return null==h||h.classList.remove("expanded"),setTimeout((()=>e.classList.remove("expanded")),150),void requestAnimationFrame((()=>{requestAnimationFrame((()=>{e.style.opacity="0"}))}));null==h||h.classList.add("expanded"),null==e||e.classList.add("expanded"),requestAnimationFrame((()=>{requestAnimationFrame((()=>{e&&(e.style.opacity="1")}))}))}function T(){const e=t.get("authToken");if(e)return a(e)?void(e.startsWith("g")?null==g||g.classList.add("guest-user"):null==g||g.classList.add("account-user")):(null==g||g.classList.remove("guest-user","account-user"),void t.remove("authToken"));null==g||g.classList.remove("guest-user","account-user")}m(),T(),null==h||h.addEventListener("click",L),null==g||g.addEventListener("click",y),document.addEventListener("signedOut",T),d(),null==s||s.addEventListener("click",u),null==c||c.addEventListener("click",l),document.addEventListener("signedOut",d)})();