(()=>{"use strict";function e(){!function(){setTimeout((()=>{var e;null===(e=document.querySelector("#transition-pause"))||void 0===e||e.remove()}),100);const e=localStorage.getItem("darkTheme");if(!e||!JSON.parse(e))return document.documentElement.classList.remove("dark"),localStorage.setItem("darkTheme",JSON.stringify(!1)),void s("light");document.documentElement.classList.add("dark"),s("dark")}();const e=document.querySelector("#theme-switcher");null==e||e.addEventListener("click",n),null==e||e.addEventListener("keyup",t)}function t(e){"Enter"===e.key&&n()}function n(){const e=localStorage.getItem("darkTheme");if(!(e?JSON.parse(e):null))return document.documentElement.classList.add("dark"),localStorage.setItem("darkTheme",JSON.stringify(!0)),void s("dark");document.documentElement.classList.remove("dark"),localStorage.setItem("darkTheme",JSON.stringify(!1)),s("light")}function s(e){const t=document.querySelector("#theme-switcher");"dark"!==e?null==t||t.classList.remove("dark-theme"):null==t||t.classList.add("dark-theme")}class i{static get(e){const t=this.createCookieMap().get(e);return t||null}static set(e,t,n){""!==e.trim()&&""!==t.trim()&&(document.cookie=n?`${e}=${t}; max-age=${n}; path=/; Secure`:`${e}=${t}; path=/; Secure`)}static remove(e){""!==e.trim()&&(document.cookie=`${e}=; max-age=0`)}static createCookieMap(){const e=document.cookie,t=new Map;if(!e)return t;const n=e.split("; ");for(const e of n){const n=e.split("=")[0],s=e.split("=")[1];t.set(n,s)}return t}}class o{static display(e,t){o.hide(e);const n=document.querySelector(`[data-target="${e.id}"]`);n&&(n.textContent=t);const s=e.parentElement;null==s||s.classList.add("error")}static hide(e){const t=e.parentElement;if(!(null==t?void 0:t.classList.contains("error")))return;null==t||t.classList.remove("error");const n=document.querySelector(`[data-target="${e.id}"]`);n&&(n.textContent="")}}function a(e){if(e.length<34)return!1;if(!e.startsWith("a")&&!e.startsWith("g"))return!1;if("_"!==e[32])return!1;if(!Number.isInteger(+e.substring(33)))return!1;return/^[A-Za-z0-9_]{34,}$/.test(e)}function u(e){const t=e.value;return""===t?(o.display(e,"A valid password is required"),!1):t.includes(" ")?(o.display(e,"Password must not contain whitespace."),!1):(o.hide(e),!0)}function r(){i.remove("authToken"),document.dispatchEvent(new CustomEvent("signedOut"))}function c(e,t,n=2e3){(""===e.trim()||n&&n<=0)&&(n=2e3);const s=document.querySelector("#popup");s&&s.remove();const i=document.createElement("span");i.id="popup",i.className=t,i.appendChild(document.createTextNode(e)),document.body.appendChild(i),requestAnimationFrame((()=>{requestAnimationFrame((()=>{i.classList.add("in-view")}))})),setTimeout((()=>{i.classList.remove("in-view"),setTimeout((()=>{i.remove()}),150)}),n||2e3)}const l=document.querySelector(".top-nav"),d=document.querySelector("#account-nav-container-btn");function m(e){if(e.target instanceof HTMLElement&&e.target.classList.contains("sign-out-btn"))return e.preventDefault(),r(),void c("Signed out successfully.","success")}function v(e){e.preventDefault();const t=document.querySelector("#account-nav-container-links");if(null==t?void 0:t.classList.contains("expanded"))return null==d||d.classList.remove("expanded"),setTimeout((()=>t.classList.remove("expanded")),150),void requestAnimationFrame((()=>{requestAnimationFrame((()=>{t.style.opacity="0"}))}));null==d||d.classList.add("expanded"),null==t||t.classList.add("expanded"),requestAnimationFrame((()=>{requestAnimationFrame((()=>{t&&(t.style.opacity="1")}))}))}function p(){const e=i.get("authToken");if(e)return a(e)?void(e.startsWith("g")?null==l||l.classList.add("guest-user"):null==l||l.classList.add("account-user")):(i.remove("authToken"),void(null==l||l.classList.remove("guest-user","account-user")));null==l||l.classList.remove("guest-user","account-user")}const y=document.querySelector(".bot-nav"),g=document.querySelector("#account-list-btn"),f=document.querySelector("#account-list-container");function L(e){if(e.target instanceof HTMLElement&&e.target.classList.contains("sign-out-btn"))return e.preventDefault(),r(),void c("Signed out successfully.","success")}function S(){const e=i.get("authToken");if(e)return a(e)?void(e.startsWith("g")?null==y||y.classList.add("guest-user"):null==y||y.classList.add("account-user")):(i.remove("authToken"),void(null==y||y.classList.remove("guest-user","account-user")));null==y||y.classList.remove("guest-user","account-user")}function q(){if(null==g?void 0:g.classList.contains("expanded"))return setTimeout((()=>null==g?void 0:g.classList.remove("expanded")),150),void requestAnimationFrame((()=>{requestAnimationFrame((()=>{f&&(f.style.opacity="0")}))}));null==g||g.classList.add("expanded"),requestAnimationFrame((()=>{requestAnimationFrame((()=>{f&&(f.style.opacity="1")}))}))}e(),p(),null==d||d.addEventListener("click",v),document.addEventListener("signedOut",p),null==l||l.addEventListener("click",m),S(),null==g||g.addEventListener("click",q),document.addEventListener("signedOut",S),null==y||y.addEventListener("click",L);const h=document.querySelector("#sign-in-form"),k=(document.querySelector("#sign-in-form-container"),document.querySelector("#sign-in-options")),E=document.querySelector("#account-option-btn"),A=document.querySelector("#guest-option-btn"),T=document.querySelector("#account-form"),b=document.querySelector("#account-email-input"),w=document.querySelector("#account-password-input"),x=(document.querySelector("#account-password-input-reveal-btn"),document.querySelector("#guest-form")),$=document.querySelector("#guest-username-input"),F=document.querySelector("#guest-password-input");document.querySelector("#guest-password-input-reveal-btn");function N(e){e.preventDefault()}function O(e){if(e.preventDefault(),e.target instanceof HTMLElement)return e.target.id===(null==E?void 0:E.id)?(T&&(T.style.display="block"),x&&(x.style.display="none"),null==A||A.classList.remove("selected"),null==E||E.classList.add("selected"),null==k||k.classList.remove("guest"),$&&($.value=""),void(F&&(F.value=""))):void(e.target.id===(null==A?void 0:A.id)&&(x&&(x.style.display="block"),T&&(T.style.display="none"),null==E||E.classList.remove("selected"),null==A||A.classList.add("selected"),null==k||k.classList.add("guest")))}null==h||h.addEventListener("submit",N),null==k||k.addEventListener("click",O),null==b||b.addEventListener("input",(()=>{!function(e){const t=e.value;""===t?o.display(e,"A valid email address is required."):t.includes(" ")?o.display(e,"Email address must not contain whitespace."):/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.[a-zA-Z]{2,}(?:\.[a-zA-Z]{2,})?$/.test(t)?o.hide(e):o.display(e,"Invalid email address.")}(b)})),null==w||w.addEventListener("input",(()=>{u(w)})),null==$||$.addEventListener("input",(()=>{!function(e){const t=e.value;""===t?o.display(e,"A valid username is required."):t.includes(" ")?o.display(e,"Username must not contain whitespace."):o.hide(e)}($)})),null==F||F.addEventListener("input",(()=>{u(F)}))})();